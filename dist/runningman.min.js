!function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);var j=new Error("Cannot find module '"+g+"'");throw j.code="MODULE_NOT_FOUND",j}var k=c[g]={exports:{}};b[g][0].call(k.exports,function(a){var c=b[g][1][a];return e(c?c:a)},k,k.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b){!function(){function a(a){return a.leaf=a,a.extend=function(a){var b,c={};a=a||{};for(b in this)c[b]="function"==typeof this[b]?this[b].bind(c):this[b];for(b in a)this[b]=a[b],"function"!=typeof a[b]&&(c[b]=a[b]);return this.base=c,this},a.implement=function(){var b,c=arguments.length;for(b=0;c>b;b+=1)arguments[b](a);return a},a}a.Abstract=function(){throw Error("[BaseClass] Abstract method was called without definition.")},a.Stub=function(){},a.Interface=function(a){return function(b){var c;for(c in a)b[c]=a[c];return b}},b.exports=a}()},{}],2:[function(a,b){var c=a("./dimension.js"),d=a("./point.js");b.exports=function(a){var b,e,f=0,g=!1,h=a.frames||1,i=a.size||c(),j=a.start||d();return b=a.speed>0?1/a.speed*1e3:0,{get ready(){return a.sheet.ready},get size(){return i},frame:0,start:function(){e=(new Date).getTime(),g=!0},pause:function(){g=!1},stop:function(){g=!1,f=0,this.frame=0},update:function(){var a,c;g&&(a=(new Date).getTime(),c=a-e,e=a,f+=c,f>=b&&(f-=b,this.nextFrame()))},nextFrame:function(){return this.frame+=1,this.frame%=h,this.frame},draw:function(b,d,e,f){var g=this.frame*a.width;e=e||c(1,1),f=f||0,b.save(),b.translate(d.x,d.y),b.rotate(f),b.scale(e.width,e.height),b.drawImage(a.sheet,j.x+g,j.y,i.width,i.height,d.x,d.y,i.width,i.height),b.restore()}}}},{"./dimension.js":7,"./point.js":14}],3:[function(a,b){{var c=a("./shape.js"),d=a("./vector.js"),e=a("./point.js");a("./dimension.js")}b.exports=function(a,b){a=a||e(),b=b||0;var f=c(a.x,a.y).extend({radius:b,intersects:function(a){return a.intersects.circle(this)},draw:function(a){a.beginPath(),a.arc(this.x,this.y,this.radius,0,2*Math.PI),a.fillStyle="rgba(250, 50, 50, 0.5)",a.fill()}});return f.intersects.circle=function(a){var b=d.length(this.x,this.y,a.x,a.y);return b<this.radius+a.radius},f.intersects.rect=function(a){var b,c=e(this.x,this.y);return this.x>a.right?c.x=a.right:this.x<a.x&&(c.x=a.x),this.y>a.bottom?c.y=a.bottom:this.y<a.y&&(c.y=a.y),b=d.length(c.x,c.y,this.x,this.y),b<circle.radius},f}},{"./dimension.js":7,"./point.js":14,"./shape.js":18,"./vector.js":21}],4:[function(a,b){var c=a("./id-counter.js"),d=a("./event-handler.js"),e=a("baseclassjs"),f=a("./rectangle.js");b.exports=function(a){var b=c.nextId,g={},h=[].concat(a.collisionSets);return e({get id(){return b},get name(){return a.name},mask:a.mask||f(),move:function(a,b){this.mask.move(a,b)},intersects:function(a){return this.mask.intersects(a)},update:function(){h.forEach(function(a){a.update(this.leaf)})},addCollision:function(a){a!==b&&(g[a]=!0)},removeCollision:function(a){g[a]=!1},isCollidingWith:function(a){return g[a]||!1}}).implement(d({events:a.on}))}},{"./event-handler.js":8,"./id-counter.js":11,"./rectangle.js":16,baseclassjs:1}],5:[function(a,b){var c=a("./rectangle.js"),d=a("./dimension.js");b.exports=function(a){var b,e,f,g=[],h=[],i=a.gridSize||d(1,1);for(b=0;b<i.x;b+=1)for(e=0;e<i.y;e+=1)g.push(c(b/i.x*a.canvasSize.width,e/i.y*a.canvasSize.height,a.canvasSize.width/i.x,a.canvasSize.height/i.y));for(f=g.length,b=0;f>b;b+=1)h.push([]);return{name:a.name,clearCollisions:function(){var a,b=h.length;for(a=0;b>a;a+=1)h[a]=[]},update:function(a){var b,c=h.length;for(b=0;c>b;b+=1)a.intersects(g[b])&&h[b].push(a)},handleCollisions:function(){var a,b,c=h.length;for(a=0;c>a;a+=1)b=h[a],b.forEach(function(a){b.forEach(function(b){var c=a.intersects(b.mask),d=a.isCollidingWith(b.id);c?(d||(a.trigger("collide/"+b.name,b),a.addCollision(b.id)),a.trigger("colliding/"+b.name,b)):(d&&(a.trigger("separate/"+b.name,b),a.removeCollision(b.id)),a.trigger("miss/"+b.name,b))})}),h[a]=[]}}}},{"./dimension.js":7,"./rectangle.js":16}],6:[function(a,b){b.exports={Shape:a("./shape.js"),Circle:a("./circle.js"),Rectangle:a("./rectangle.js"),Dimension:a("./dimension.js"),Point:a("./point.js"),Vector:a("./vector.js"),Polar:a("./polar.js"),FrameCounter:a("./frame-counter.js"),IdCounter:a("./id-counter.js"),Mouse:a("./mouse.js"),Keyboard:a("./keyboard.js"),EventHandler:a("./event-handler.js"),SpriteSheet:a("./spritesheet.js"),AnimationStrip:a("./animation-strip.js"),CollisionHandler:a("./collision-handler.js"),Game:a("./game.js"),Screen:a("./screen.js"),Collidable:a("./collidable.js"),Sprite:a("./sprite.js")}},{"./animation-strip.js":2,"./circle.js":3,"./collidable.js":4,"./collision-handler.js":5,"./dimension.js":7,"./event-handler.js":8,"./frame-counter.js":9,"./game.js":10,"./id-counter.js":11,"./keyboard.js":12,"./mouse.js":13,"./point.js":14,"./polar.js":15,"./rectangle.js":16,"./screen.js":17,"./shape.js":18,"./sprite.js":19,"./spritesheet.js":20,"./vector.js":21}],7:[function(a,b){var c=a("baseclassjs");b.exports=function(a,b){return c({width:a||0,height:b||0})}},{baseclassjs:1}],8:[function(a,b){var c=a("baseclassjs");b.exports=function(a){var b,d;return a=a||{},b=a.events||{},d=a.singles||{},c.Interface({on:function(a,c){b[a]=b[a]||[],b[a].push(c)},one:function(a,b){d[a]=d[a]||[],d[a].push(b)},off:function(a){b[a]=[],d[a]=[]},trigger:function(a,c){b[a]&&b[a].forEach(function(a){a(c)}),d[a]&&(d[a].forEach(function(a){a(c)}),single[a]=[])}})}},{baseclassjs:1}],9:[function(a,b){var c=frameCountThisSecond=frameRate=0,d=(new Date).getTime();b.exports={countFrame:function(){var a=(new Date).getTime(),b=a-d;frameCountThisSecond+=1,d=a,c+=b,c>=1e3&&(c-=1e3,frameRate=frameCountThisSecond,frameCountThisSecond=0)},get frameRate(){return frameRate}}},{}],10:[function(a,b){var c,d,e,f,g=a("./collision-handler.js"),h=a("./dimension.js"),i=a("./circle.js"),j=a("./collidable.js"),k=a("./frame-counter.js"),l=!1,m=100,n=document.createElement("canvas"),o=[],p={},q=[],r=!1;window.innerWidth>=500?(n.width=320,n.height=480,n.style.border="1px solid #000",c="mousedown",d="mouseup"):(n.width=window.innerWidth,n.height=window.innerHeight,c="touchstart",d="touchend"),f=g(h(4,4),n),e=n.getContext("2d"),document.addEventListener(c,function(a){f.update(j({name:"screentap",mask:i(a.offsetX,a.offsetY,12)}))}),document.body.appendChild(n);var s={get canvas(){return n},get ctx(){return e},get pressEventName(){return{start:c,end:d}},get screenTap(){return f},screen:function(a){return p[a]},addScreens:function(a){q=q.concat(a)},removeScreen:function(a){a.removed=!0,r=!0},run:function(a){var b,c=this;a=a||{},b=a.speed||m,a.debug&&(window.Dragon=this),l||(o.forEach(function(a){a.start()}),l=window.setInterval(function(){a.debug&&console.log("beat"),c.update(),c.draw(),k.countFrame()},b))},kill:function(){window.clearInterval(l),l=!1,o.forEach(function(a){a.stop()})},update:function(){f.handleCollisions(),o.forEach(function(a){a.update()}),q.length&&(q.forEach(function(a){o.push(a),a.name&&(p[a.name]=a)}),o.sort(function(a,b){return b.depth-a.depth}),q=[]),r&&(o=o.filter(function(a){return!a.removed}),r=!1)},draw:function(){o.forEach(function(a){a.draw(e)})}};b.exports=s},{"./circle.js":3,"./collidable.js":4,"./collision-handler.js":5,"./dimension.js":7,"./frame-counter.js":9}],11:[function(a,b){var c=0;b.exports={get lastId(){return c},get nextId(){return c+=1}}},{}],12:[function(a,b){function c(a){return a.charCode||a.keyCode||a.which}var d={alt:!1,ctrl:!1,shift:!1},e={};document.onkeydown=function(a){var b=c(a),f=String.fromCharCode(b);e[b]=!0,d[f]=!0,d.alt=a.altKey,d.ctrl=a.ctrlKey,d.shift=a.shiftKey},document.onkeyup=function(a){var b=c(a),f=String.fromCharCode(b);e[b]=!1,d[f]=!1,d.alt=a.altKey,d.ctrl=a.ctrlKey,d.shift=a.shiftKey},b.exports={get alt(){return d.alt},get ctrl(){return d.ctrl},get shift(){return d.shift},name:function(a){return d[a]||!1},code:function(a){return e[a]||!1}}},{}],13:[function(a,b){var c=a("./game.js"),d=!1;document.addEventListener(c.pressEventName.start,function(){d=!0}),document.addEventListener(c.pressEventName.end,function(){d=!1}),b.exports={get isDown(){return d}}},{"./game.js":10}],14:[function(a,b){b.exports=function(b,c){return{extend:a("baseclassjs"),x:b||0,y:c||0}}},{baseclassjs:1}],15:[function(a,b){var c=a("./vector.js"),d=a("baseclassjs");b.exports=function(a,b){return d({theta:a||0,magnitude:b||0,invert:function(){return this.magnitude*=-1,this.theta+=Math.PI,this},toVector:function(){return c(b*Math.cos(a),b*Math.sin(a))}})}},{"./vector.js":21,baseclassjs:1}],16:[function(a,b){var c=a("./shape.js"),d=a("./point.js"),e=a("./dimension.js");b.exports=function(a,b){a=a||d(),b=b||e();var f=c(a.x,a.y).extend({width:b.width||0,height:b.height||0,right:a.x+b.width||0,bottom:a.y+b.height||0,move:function(a,b){this.base.move(a,b),this.right=a+this.width,this.bottom=b+this.height},intersects:function(a){return a.intersects.rect(this)},draw:function(a){a.fillStyle="rgba(250, 50, 50, 0.5)",a.fillRect(this.x,this.y,this.width,this.height)}});return f.intersects.rect=function(a){return this.x<a.right&&this.right>a.x&&this.y<a.bottom&&this.bottom>a.y},f.intersects.circle=function(a){var b,c=_Point(a.x,a.y);return a.x>this.right?c.x=this.right:a.x<this.x&&(c.x=this.x),a.y>this.bottom?c.y=this.bottom:a.y<this.y&&(c.y=this.y),b=Vector.length(c.x,c.y,a.x,a.y),b<circle.radius},f}},{"./dimension.js":7,"./point.js":14,"./shape.js":18}],17:[function(a,b){var c=a("baseclassjs");b.exports=function(a){var b=[],d={},e=[],f=!1,g={},h=!1,i=!1;return a.spriteSet=[].concat(a.spriteSet),a.collisionSets=[].concat(a.collisionSets),a.spriteSet.forEach(function(a){e.push(a),a.name&&(d[a.name]=a)}),a.collisionSets.forEach(function(a){g[a.name]=a}),c({get name(){return a.name},start:function(){b.forEach(function(a){a.strip.start()}),h=!0,i=!0},pause:function(){b.forEach(function(a){a.strip.pause()}),h=!1,i=!0},stop:function(){b.forEach(function(a){a.strip.stop()}),h=!1,i=!1},depth:a.depth||0,collisionSet:function(a){return g[a]},addCollisionSet:function(a){g[a.name]=a},sprite:function(a){return d[a]},addSprites:function(a){e=e.concat(a)},removeSprite:function(a){a.removed=!0,f=!0},update:function(){var a,c=!1,i=[];if(h){b.forEach(function(a){h&&!a.removed&&a.update()});for(a in g)g[a].handleCollisions()}e.length&&(e.forEach(function(a){a.ready?(b.push(a),a.name&&(d[a.name]=a),c=!0):i.push(a)}),c&&b.sort(function(a,b){return b.depth-a.depth}),e=i),f&&(b=b.filter(function(a){return!a.removed}),f=!1)},draw:function(a){i&&b.forEach(function(b){b.draw(a)})}})}},{baseclassjs:1}],18:[function(a,b){var c=a("baseclassjs");b.exports=function(a,b){return c({x:a||0,y:b||0,move:function(a,b){this.x=a,this.y=b},intersects:c.Stub})}},{baseclassjs:1}],19:[function(a,b){var c=a("./collidable.js"),d=a("./point.js"),e=a("./dimension.js");b.exports=function(a){var b=a.size||a.strip.size;return c(a).extend({get ready(){return a.strip.ready},get strip(){return a.strip},pos:a.pos||d(),scale:a.scale||1,size:b,rotation:a.rotation||0,depth:a.depth||0,speed:a.speed||d(),update:function(){this.base.update(),a.strip.update()},draw:function(c){a.strip.draw(c,this.pos,e(b.width/a.strip.size.width*this.scale,b.height/a.strip.size.height*this.scale),this.rotation)},move:function(a,b){this.pos.x=a,this.pos.y=b,this.base.move(a,b)},shift:function(a,b){this.pos.x+=a||this.speed.x,this.pox.y+=b||this.speed.y,this.base.move(this.pos.x,this.pos.y)}})}},{"./collidable.js":4,"./dimension.js":7,"./point.js":14}],20:[function(a,b){var c={};b.exports=function(a){var b;return a.src in c?c[a.src]:(b=new Image,b.ready=!1,c[a.src]=b,b.onload=function(){b.ready=!0},b.src="assets/img/"+a.src,b)}},{}],21:[function(a,b){function c(b,c,d,e){return void 0!==e&&(b-=d,c-=e),{extend:a("baseclassjs"),x:b,y:c,length:function(){return Math.sqrt(c*c+b*b)}}}a("./point.js");c.length=function(a,b,c,d){return void 0!==d&&(a-=c,b-=d),Math.sqrt(b*b+a*a)},b.exports=c},{"./point.js":14,baseclassjs:1}],22:[function(a,b){var c=a("dragonjs"),d=c.Dimension,e=c.CollisionHandler,f=c.Game;b.exports=e({name:"environ",gridSize:d(5,5),canvasSize:f.canvas})},{dragonjs:6}],23:[function(a){var b=a("dragonjs"),c=b.Game,d=a("./screens/main.js");c.addScreens([d]),c.run({debug:!0})},{"./screens/main.js":24,dragonjs:6}],24:[function(a,b){var c=a("dragonjs"),d=c.Screen,e=a("../sprites/sky.js"),f=a("../sprites/runner.js"),g=a("../sprites/ground.js"),h=a("../collisions/main.js");b.exports=d({name:"main",collisionSets:h,spriteSet:[e,f,g]})},{"../collisions/main.js":22,"../sprites/ground.js":25,"../sprites/runner.js":26,"../sprites/sky.js":27,dragonjs:6}],25:[function(a,b){var c=a("dragonjs"),d=c.Game.canvas,e=c.Point,f=c.Dimension,g=c.Rectangle,h=c.Sprite,i=c.AnimationStrip,j=c.SpriteSheet,k=a("../collisions/main.js");b.exports=h({name:"ground",collisionSets:k,mask:g(e(0,d.height-115),f(d.width,100)),strip:i({sheet:j({src:"ground.png"}),size:f(81,79)}),pos:e(0,d.height-115),scale:.4})},{"../collisions/main.js":22,dragonjs:6}],26:[function(a,b){var c=a("dragonjs"),d=(c.Game,c.Keyboard),e=c.Point,f=c.Dimension,g=c.Rectangle,h=c.Sprite,i=c.AnimationStrip,j=c.SpriteSheet,k=a("../collisions/main.js");b.exports=h({name:"runner",collisionSets:k,mask:g(e(100,100),f(66,115)),strip:i({sheet:j({src:"runningGrant.png"}),start:e(),size:f(165,288),frames:12,speed:5}),scale:.4,pos:e(100,100),on:{"collide/ground":function(){console.log("Runner: Colliding with ground!")}}}).extend({update:function(){console.log("runner update"),d.name(" ")&&console.log("Runner: Jumping!"),this.speed.x=d.code(37)?-4:d.code(39)?4:0,this.speed.y=d.code(38)?-4:d.code(40)?4:0,this.base.update()}})},{"../collisions/main.js":22,dragonjs:6}],27:[function(a,b){var c=a("dragonjs"),d=c.Game,e=c.Point,f=c.Sprite,g=c.AnimationStrip,h=c.SpriteSheet;b.exports=f({name:"sky",strip:g({sheet:h({src:"sky.png"}),start:e(),size:d.canvas,frames:1})})},{dragonjs:6}]},{},[23]);