!function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);var j=new Error("Cannot find module '"+g+"'");throw j.code="MODULE_NOT_FOUND",j}var k=c[g]={exports:{}};b[g][0].call(k.exports,function(a){var c=b[g][1][a];return e(c?c:a)},k,k.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b){b.exports=function(){throw Error("[BaseClass] Abstract method was called without definition.")}},{}],2:[function(a,b){function c(a){return a.extend=function(b){var c,e={base:a.base};b=b||{};for(c in a)"function"==typeof a[c]&&(e[c]=a[c].bind(a));for(c in b)a[c]="function"==typeof b[c]?d(c,a,e,b):b[c];return a.base=e,a},a.implement=function(){var b,c=arguments.length;for(b=0;c>b;b+=1)arguments[b](a);return a},a}var d=a("./rebind.js");c.Abstract=a("./abstract.js"),c.Stub=a("./stub.js"),c.Interface=a("./interface.js"),b.exports=c},{"./abstract.js":1,"./interface.js":3,"./rebind.js":4,"./stub.js":5}],3:[function(a,b){b.exports=function(a){return function(b){var c;for(c in a)b[c]=a[c];return b}}},{}],4:[function(a,b){b.exports=function(a,b,c,d){return function(){var e,f=b.base;return b.base=c,b.self=d,e=d[a].apply(b,arguments),b.base=f,e}}},{}],5:[function(a,b){b.exports=function(){}},{}],6:[function(a,b){(function(a){b.exports=function(b){var c,d={},e={},f=[],g=a.localStorage||{};return c=function(a,c){var h,i,a,j,k="string"==typeof a,l=typeof c,m="undefined"!==l&&"function"!==l;if("on"===g.lumberjack||b){if(!k||!m)throw Error("Lumberjack Error: log(channel, data) requires an channel {String} and a payload {String|Object|Number|Boolean}.");for(j={time:new Date,data:c,channel:a,id:f.length},d[a]=d[a]||[],d[a].push(j),f.push(j),e[a]=e[a]||[],i=e[a].length,h=0;i>h;h+=1)e[a][h](c)}},c.clear=function(a){a?d[a]=[]:(d={},f=[])},c.readback=function(a,b){var c="string"==typeof a;if(c)return b?JSON.stringify(d[a],null,4):d[a]||[];throw Error("log.readback(channel, pretty) requires an channel {String}.")},c.readback.master=function(a){return a?JSON.stringify(f,null,4):f},c.readback.channels=function(a){var b=Object.keys(d);return a?JSON.stringify(b):b},c.on=function(a,b){var c="string"==typeof a,d="function"==typeof b;if(!c||!d)throw Error("log.on(channel, cb) requires an channel {String} and a callback {Function}.");e[a]=e[a]||[],e[a].push(b)},c.off=function(a){var b="string"==typeof a;if(!b)throw Error("log.off(channel) requires an channel {String}.");e[a]=[]},c.enable=function(){b=!0},c.disable=function(){b=!1},c}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],7:[function(a,b){{var c=a("./dimension.js"),d=a("./point.js");a("./log.js")}b.exports=function(a){var b,e=0,f=!1,g=a.frames||1,h=a.size||c(),i=a.start||d(),i=d(h.width*i.x,h.height*i.y),j=1;return{ready:function(){return a.sheet.ready},size:h,frame:0,speed:a.speed||0,load:function(b){a.sheet.load(b)},start:function(){b=Date.now(),f=!0},pause:function(){f=!1},stop:function(){f=!1,e=0,this.frame=0,j=1},update:function(){var a,c,d;f&&this.speed&&(d=1/this.speed*1e3,a=Date.now(),c=a-b,e+=c,e>=d&&(e=0,this.nextFrame()),b=a)},nextFrame:function(){return this.frame+=j,a.sinusoid?this.frame%(g-1)===0&&(j*=-1):this.frame%=g,this.frame},draw:function(b,d,e,f){var g,j=this.frame*h.width;e=e||c(1,1),f=f||0,g=c(h.width*e.width,h.height*e.height),b.save(),b.translate(d.x+g.width/2,d.y+g.height/2),b.rotate(f),b.drawImage(a.sheet,i.x+j,i.y,h.width,h.height,-g.width/2,-g.height/2,g.width,g.height),b.restore()}}}},{"./dimension.js":14,"./log.js":21,"./point.js":23}],8:[function(a,b){var c=document.createElement("canvas");window.innerWidth>=500?(c.width=320,c.height=480,c.style.border="1px solid #000",c.mobile=!1):(c.width=window.innerWidth,c.height=window.innerHeight,document.body.style.height=c.height+"px",c.mobile=!0),document.body.appendChild(c),c.ctx=c.getContext("2d"),b.exports=c},{}],9:[function(a,b){{var c=a("./shape.js"),d=a("./vector.js"),e=a("./point.js");a("./dimension.js")}b.exports=function(a,b){return a=a||e(),b=b||0,c({pos:a,name:"circle",intersects:{rectangle:function(a){var b,c=e(this.x,this.y);return this.x>a.right?c.x=a.right:this.x<a.x&&(c.x=a.x),this.y>a.bottom?c.y=a.bottom:this.y<a.y&&(c.y=a.y),b=d(this.x-c.x,this.y-c.y),b.magnitude<this.radius},circle:function(a){var b=d(a.x-this.x,a.y-this.y);return b.magnitude<this.radius+a.radius}}}).extend({radius:b,width:2*b,height:2*b,top:a.y-b,right:a.x+b,bottom:a.y+b,left:a.x-b,draw:function(a){a.beginPath(),a.lineWidth=1,a.strokeStyle="rgba(250, 50, 50, 0.5)",a.arc(this.x,this.y,this.radius,0,2*Math.PI),a.stroke()},move:function(a,b){this.x=a,this.y=b,this.top=b-this.radius,this.right=a+this.radius,this.bottom=b+this.radius,this.left=a-this.radius},resize:function(a){this.radius=a,this.width=2*a,this.height=2*a,this.top=this.y-a,this.right=this.x+a,this.bottom=this.y+a,this.left=this.x-a}})}},{"./dimension.js":14,"./point.js":23,"./shape.js":27,"./vector.js":30}],10:[function(a,b){var c=a("./id-counter.js"),d=a("./event-handler.js"),e=a("baseclassjs"),f=a("./rectangle.js"),g=a("./point.js");b.exports=function(a){var b={},h=[],i=!1;return a.collisionSets&&(h=[].concat(a.collisionSets)),e({id:c.nextId,name:a.name,mask:a.mask||f(),offset:a.offset||g(),move:function(a){this.mask.move(a.x+this.offset.x,a.y+this.offset.y)},intersects:function(a){return this.mask.intersects(a)},update:function(){var a=this;i||(h.forEach(function(b){b.update(a)}),i=!0)},teardown:function(){i=!1},addCollision:function(a){b[a]=!0},removeCollision:function(a){b[a]=!1},isCollidingWith:function(a){return b[a]||!1}}).implement(d({events:a.on,singles:a.one}))}},{"./event-handler.js":15,"./id-counter.js":18,"./point.js":23,"./rectangle.js":25,baseclassjs:2}],11:[function(a,b){var c=a("./rectangle.js"),d=a("./point.js"),e=a("./dimension.js"),f=a("./canvas.js");b.exports=function(a){var b,g,h=[],i=[],j=a.gridSize||e(1,1);for(b=0;b<j.width;b+=1)for(g=0;g<j.height;g+=1)h.push(c(d(b/j.width*f.width,g/j.height*f.height),e(f.width/j.width,f.height/j.height)));for(b=0;b<h.length;b+=1)i.push([]);return{name:a.name,draw:function(a,b){b&&h.forEach(function(b){b.draw(a)}),i.forEach(function(b){b.forEach(function(b){b.mask.draw(a)})})},clearCollisions:function(){var a,b=i.length;for(a=0;b>a;a+=1)i[a]=[]},update:function(a){var b,c=i.length;for(b=0;c>b;b+=1)a.intersects(h[b])&&i[b].push(a)},handleCollisions:function(){var a,b,c=i.length;for(a=0;c>a;a+=1)b=i[a],b.forEach(function(a){b.forEach(function(b){var c,d;a.id!==b.id&&(c=a.intersects(b.mask),d=a.isCollidingWith(b.id),c?(d||(a.addCollision(b.id),a.trigger("collide/"+b.name,b)),a.trigger("colliding/"+b.name,b)):(d&&(a.removeCollision(b.id),a.trigger("separate/"+b.name,b)),a.trigger("miss/"+b.name,b)))})})},teardown:function(){this.clearCollisions()}}}},{"./canvas.js":8,"./dimension.js":14,"./point.js":23,"./rectangle.js":25}],12:[function(a,b){b.exports={Shape:a("./shape.js"),Circle:a("./circle.js"),Rectangle:a("./rectangle.js"),Dimension:a("./dimension.js"),Point:a("./point.js"),Vector:a("./vector.js"),Polar:a("./polar.js"),FrameCounter:a("./frame-counter.js"),IdCounter:a("./id-counter.js"),Mouse:a("./mouse.js"),Keyboard:a("./keyboard.js"),EventHandler:a("./event-handler.js"),SpriteSheet:a("./spritesheet.js"),AnimationStrip:a("./animation-strip.js"),CollisionHandler:a("./collision-handler.js"),Game:a("./game.js"),Screen:a("./screen.js"),Collidable:a("./collidable.js"),Sprite:a("./sprite.js")}},{"./animation-strip.js":7,"./circle.js":9,"./collidable.js":10,"./collision-handler.js":11,"./dimension.js":14,"./event-handler.js":15,"./frame-counter.js":16,"./game.js":17,"./id-counter.js":18,"./keyboard.js":20,"./mouse.js":22,"./point.js":23,"./polar.js":24,"./rectangle.js":25,"./screen.js":26,"./shape.js":27,"./sprite.js":28,"./spritesheet.js":29,"./vector.js":30}],13:[function(a,b){b.exports={show:{fps:function(){}}}},{}],14:[function(a,b){function c(a,b){return{width:a||0,height:b||0,clone:function(){return c(this.width,this.height)},equals:function(a){return this.width===a.width&&this.height===a.height},scale:function(a){return c(this.width*a,this.height*a)}}}b.exports=c},{}],15:[function(a,b){var c=a("baseclassjs");b.exports=function(a){var b,d={},e={};a=a||{};for(b in a.events)d[b]=[a.events[b]];for(b in a.singles)e[b]=[a.singles[b]];return c.Interface({on:function(a,b){d[a]=d[a]||[],d[a].push(b)},one:function(a,b){e[a]=e[a]||[],e[a].push(b)},off:function(a){d[a]=[],e[a]=[]},trigger:function(a,b){var c=this;a in d&&d[a].forEach(function(a){a.call(c,b)}),a in e&&(e[a].forEach(function(a){a.call(c,b)}),e[a]=[])}})}},{baseclassjs:2}],16:[function(a,b){var c=frameCountThisSecond=frameRate=0,d=(new Date).getTime();b.exports={countFrame:function(){var a=(new Date).getTime(),b=a-d;frameCountThisSecond+=1,d=a,c+=b,c>=1e3&&(c-=1e3,frameRate=frameCountThisSecond,frameCountThisSecond=0)},get frameRate(){return frameRate},draw:function(a){a.font="30px Verdana",a.fillStyle="rgba(250, 50, 50, 0.5)",a.fillText(frameRate,20,50)}}},{}],17:[function(a,b){var c=a("./collision-handler.js"),d=a("./point.js"),e=a("./dimension.js"),f=a("./circle.js"),g=a("./rectangle.js"),h=a("./collidable.js"),i=a("./frame-counter.js"),j=a("./mouse.js"),k=a("./canvas.js"),l=k.ctx,m=a("./id-counter.js"),n=a("./log.js"),o=!1,p=!1,q=30,r=[],s={},t=[],u=!1,v=c({name:"dragon",gridSize:e(4,4),canvasSize:k}),w={},x={screentap:h({name:"screentap",mask:f(d(),15)}),screendrag:h({name:"screendrag",mask:f(d(),25)}),screenhold:h({name:"screenhold",mask:f(d(),15)}),screenedge:{top:h({name:"screenedge/top",mask:g(d(0,-9),e(k.width,10))}),right:h({name:"screenedge/right",mask:g(d(k.width-1,0),e(10,k.height))}),bottom:h({name:"screenedge/bottom",mask:g(d(0,k.height-1),e(k.width,10))}),left:h({name:"screenedge/left",mask:g(d(-9,0),e(10,k.height))})}};j.on.down(function(){x.screentap.move(j.offset),v.update(x.screentap)}),b.exports={log:n,canvas:k,debug:a("./debug-console.js"),collisions:v,screen:function(a){return s[a]},addScreens:function(a){var b;a&&(a=[].concat(a),b=m.nextId,w[b]=a.length,a.forEach(function(c){c.load(function(){w[b]-=1,0===w[b]&&(t=t.concat(a))})}))},removeScreen:function(a){a.removed=!0,u=!0},run:function(a){var b,c=this;a=a||{},b=a.speed||q,o=a.debug,o&&(window.Dragon=this),p||(r.forEach(function(a){a.start()}),p=window.setInterval(function(){c.update(),c.draw(),c.teardown(),i.countFrame()},b))},kill:function(){window.clearInterval(p),p=!1,r.forEach(function(a){a.stop()})},update:function(){j.is.dragging?(x.screendrag.move(j.offset),v.update(x.screendrag)):j.is.holding&&(x.screenhold.move(j.offset),v.update(x.screenhold)),v.update(x.screenedge.top),v.update(x.screenedge.right),v.update(x.screenedge.bottom),v.update(x.screenedge.left),r.forEach(function(a){a.update()}),v.handleCollisions(),t.length&&(t.forEach(function(a){r.push(a),a.name&&(s[a.name]=a),a.trigger("ready")}),r.sort(function(a,b){return b.depth-a.depth}),t=[])},draw:function(){r.forEach(function(a){a.draw(l,o)}),o&&(i.draw(l),v.draw(l))},teardown:function(){v.teardown(),r.forEach(function(a){a.teardown()}),u&&(r=r.filter(function(a){return!a.removed}),u=!1)}}},{"./canvas.js":8,"./circle.js":9,"./collidable.js":10,"./collision-handler.js":11,"./debug-console.js":13,"./dimension.js":14,"./frame-counter.js":16,"./id-counter.js":18,"./log.js":21,"./mouse.js":22,"./point.js":23,"./rectangle.js":25}],18:[function(a,b){var c=0;b.exports={get lastId(){return c},get nextId(){return c+=1}}},{}],19:[function(a,b){b.exports=function(a){var b=new Image;return b.ready=!1,b.cmd=[],b.processLoadEvents=function(){this.cmd.forEach(function(a){a(b)}),this.cmd=[]},b.onload=function(){this.ready=!0,this.processLoadEvents()},b.load=function(c){c=c||function(){},this.ready?c(b):(this.cmd.push(c),this.src="assets/img/"+a)},b}},{}],20:[function(a,b){function c(a){return a.charCode||a.keyCode||a.which}var d={alt:!1,ctrl:!1,shift:!1},e={};document.onkeydown=function(a){var b=c(a),f=String.fromCharCode(b);e[b]=!0,d[f]=!0,d.alt=a.altKey,d.ctrl=a.ctrlKey,d.shift=a.shiftKey},document.onkeyup=function(a){var b=c(a),f=String.fromCharCode(b);e[b]=!1,d[f]=!1,d.alt=a.altKey,d.ctrl=a.ctrlKey,d.shift=a.shiftKey},b.exports={get alt(){return d.alt},get ctrl(){return d.ctrl},get shift(){return d.shift},arrow:{get left(){return e[37]||!1},get up(){return e[38]||!1},get right(){return e[39]||!1},get down(){return e[40]||!1}},name:function(a){return d[a]||!1},code:function(a){return e[a]||!1}}},{}],21:[function(a,b){var c=a("lumberjackjs");b.exports=c()},{lumberjackjs:6}],22:[function(a,b){(function(c){function d(a){return j.mobile?h(a.touches[0].clientX,a.touches[0].clientY):h(a.offsetX,a.offsetY)}var e,f,g,h=a("./point.js"),i=a("./vector.js"),j=a("./canvas.js"),k=!1,l=!1,m=!1,n=h(),o=h(),p=i();j.mobile?(e="touchstart",f="touchmove",g="touchend"):(e="mousedown",f="mousemove",g="mouseup"),j.addEventListener(e,function(a){k=!0,n=d(a),c.setTimeout(function(){k&&(m=!0)},200)}),document.addEventListener(g,function(){k=l=m=!1}),j.addEventListener(f,function(a){o=n,n=d(a),k&&(p.x=n.x-o.x,p.y=n.y-o.y,p.magnitude>1&&(l=!0))}),b.exports={is:{get down(){return k},get dragging(){return l},get holding(){return m}},get offset(){return n},on:{down:function(a){j.addEventListener(e,a)},click:function(){},dclick:function(){},up:function(a){document.addEventListener(g,a)},move:function(a){j.addEventListener(f,a)}},eventName:{start:e,move:f,end:g}}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./canvas.js":8,"./point.js":23,"./vector.js":30}],23:[function(a,b){function c(a,b){return{x:a||0,y:b||0,clone:function(){return c(this.x,this.y)},equals:function(a){return this.x===a.x&&this.y===a.y}}}b.exports=c},{}],24:[function(a,b){function c(a,b,c,d){var e=a.magnitude===d*b.magnitude,f=(a.theta%Math.PI).toFixed(5),g=((b.theta+c)%Math.PI).toFixed(5);return e&&f===g}function d(a,b){return{theta:a||0,magnitude:b||0,invert:function(){return d(this.theta+Math.PI,-1*this.magnitude)},clone:function(){return d(this.theta,this.magnitude)},toVector:function(){return e(this.magnitude*Math.cos(this.theta),this.magnitude*Math.sin(this.theta))},equals:function(a){return c(this,a,0,1)||c(this,a,Math.PI,-1)}}}var e=a("./vector.js");b.exports=d},{"./vector.js":30}],25:[function(a,b){var c=a("./shape.js"),d=a("./point.js"),e=a("./dimension.js"),f=a("./vector.js");b.exports=function(a,b){return a=a||d(),b=b||e(),c({pos:a,name:"rectangle",intersects:{rectangle:function(a){return this.x<a.right&&this.right>a.x&&this.y<a.bottom&&this.bottom>a.y},circle:function(a){var b,c=d(a.x,a.y);return a.x>this.right?c.x=this.right:a.x<this.x&&(c.x=this.x),a.y>this.bottom?c.y=this.bottom:a.y<this.y&&(c.y=this.y),b=f(a.x-c.x,a.y-c.y),b.magnitude<a.radius}}}).extend({width:b.width||0,height:b.height||0,top:a.y||0,right:a.x+b.width||0,bottom:a.y+b.height||0,left:a.x||0,move:function(a,b){this.x=a,this.y=b,this.top=b,this.right=a+this.width,this.bottom=b+this.height,this.left=a},resize:function(a){this.width=a.width,this.height=a.height,this.right=this.x+a.width,this.bottom=this.y+a.height},draw:function(a){a.beginPath(),a.lineWidth=1,a.strokeStyle="rgba(250, 50, 50, 0.5)",a.rect(this.x,this.y,this.width,this.height),a.stroke()}})}},{"./dimension.js":14,"./point.js":23,"./shape.js":27,"./vector.js":30}],26:[function(a,b){var c=a("baseclassjs"),d=a("./event-handler.js"),e=a("./id-counter.js");b.exports=function(a){var b,f=!1,g=[],h={},i=[],j={},k=!1,l={},m=!1,n=!1;return b=c({name:a.name,load:function(b){f||(this.addSprites({set:a.spriteSet,onload:b}),f=!0)},start:function(){g.forEach(function(a){a.strip.start()}),m=!0,n=!0},pause:function(){g.forEach(function(a){a.strip.pause()}),m=!1,n=!0},stop:function(){g.forEach(function(a){a.strip.stop()}),m=!1,n=!1},depth:a.depth||0,collision:function(a){return l[a]},addCollisionSets:function(a){a&&(a=[].concat(a),a.forEach(function(a){l[a.name]=a}))},sprite:function(a){return h[a]},addSprites:function(a){var b,c,d;a=a||{},a.set&&(c=a.onload||function(){},d=[].concat(a.set),b=e.nextId,j[b]=d.length,d.forEach(function(a){a.load(function(){j[b]-=1,0===j[b]&&(i=i.concat(d),c())})}))},removeSprite:function(a){a.removed=!0,k=!0},update:function(){var a;g.forEach(function(a){m&&!a.removed&&a.update()});for(a in l)l[a].handleCollisions();i.length&&(i.forEach(function(a){g.push(a),a.name&&(h[a.name]=a),a.strip.start()}),g.sort(function(a,b){return b.depth-a.depth}),i=[])},draw:function(a,b){var c;if(n&&(g.forEach(function(b){b.draw(a)}),b))for(c in l)l[c].draw(a)},teardown:function(){var a;m&&g.forEach(function(a){a.removed||a.teardown()});for(a in l)l[a].teardown();k&&(g=g.filter(function(a){return!a.removed}),k=!1)}}).implement(d({events:a.on,singles:a.one})),b.addCollisionSets(a.collisionSets),b}},{"./event-handler.js":15,"./id-counter.js":18,baseclassjs:2}],27:[function(a,b){var c=a("baseclassjs"),d=a("./point.js");b.exports=function(a){var b,e;return a=a||{},e=a.intersects||{},b=a.pos||d(),c({x:b.x,y:b.y,name:a.name,move:c.Abstract,resize:c.Abstract,intersects:function(a){return e[a.name].call(this,a)},draw:c.Stub})}},{"./point.js":23,baseclassjs:2}],28:[function(a,b){var c=(a("baseclassjs"),a("./collidable.js")),d=a("./point.js"),e=a("./dimension.js"),f=a("./rectangle.js");b.exports=function(a){var b=!1,g=a.strips||{},h=a.pos||d();return a.mask=a.mask||f(),a.offset=d(a.mask.x,a.mask.y),a.mask.x=h.x+a.offset.x,a.mask.y=h.y+a.offset.y,c(a).extend({ready:function(){return this.strip.ready()},strip:g[a.startingStrip],useStrip:function(a){this.strip!==g[a]&&(this.strip.stop(),this.strip=g[a],this.strip.start())},getStrip:function(a){return g[a]},pos:h,scale:a.scale||1,size:a.size||g[a.startingStrip].size,trueSize:function(){return this.size.scale(this.scale)},rotation:a.rotation||0,depth:a.depth||0,speed:a.speed||d(),update:function(){this.shift(),this.strip.update(),this.base.update()},draw:function(a){var b=this.strip.size;this.strip.draw(a,this.pos,e(this.scale*this.size.width/b.width,this.scale*this.size.height/b.height),this.rotation)},load:function(a){var c,d;if(!b){d=Object.keys(g).length;for(c in g)g[c].load(function(){d-=1,0===d&&(a(),b=!0)})}},move:function(b,c){this.pos.x=b,this.pos.y=c,a.freemask||this.base.move(this.pos)},shift:function(b,c){this.pos.x+=b||this.speed.x,this.pos.y+=c||this.speed.y,a.freemask||this.base.move(this.pos)}})}},{"./collidable.js":10,"./dimension.js":14,"./point.js":23,"./rectangle.js":25,baseclassjs:2}],29:[function(a,b){var c=a("./image.js"),d={};b.exports=function(a){var b,e=a.src;return e in d?b=d[e]:(b=c(e),d[e]=b),b}},{"./image.js":19}],30:[function(a,b){function c(a,b){return{x:a||0,y:b||0,get magnitude(){return Math.abs(Math.sqrt(this.y*this.y+this.x*this.x))},clone:function(){return c(this.x,this.y)},equals:function(a){return this.x===a.x&&this.y===a.y},scale:function(a){return c(this.x*a,this.y*a)},toPolar:function(){return d(Math.atan(this.y/this.x),this.magnitude)}}}var d=a("./polar.js");b.exports=c},{"./polar.js":24}],31:[function(a,b){var c=a("is-node"),d=a;b.exports=c?d("./lib/node"):a("./lib/browser")},{"./lib/browser":32,"is-node":33}],32:[function(a,b){b.exports=a("jsonp")},{jsonp:34}],33:[function(a,b){(function(a){b.exports=!("undefined"==typeof a||!a.versions||!a.versions.node)}).call(this,a("_process"))},{_process:38}],34:[function(a,b){function c(){}function d(a,b,d){function g(){h.parentNode.removeChild(h),window[o]=c}"function"==typeof b&&(d=b,b={}),b||(b={});var h,i,j=b.prefix||"__jp",k=b.param||"callback",l=null!=b.timeout?b.timeout:6e4,m=encodeURIComponent,n=document.getElementsByTagName("script")[0]||document.head,o=j+f++;l&&(i=setTimeout(function(){g(),d&&d(new Error("Timeout"))},l)),window[o]=function(a){e("jsonp got",a),i&&clearTimeout(i),g(),d&&d(null,a)},a+=(~a.indexOf("?")?"&":"?")+k+"="+m(o),a=a.replace("?&","?"),e('jsonp req "%s"',a),h=document.createElement("script"),h.src=a,n.parentNode.insertBefore(h,n)}var e=a("debug")("jsonp");b.exports=d;var f=0},{debug:35}],35:[function(a,b,c){function d(){return"WebkitAppearance"in document.documentElement.style||window.console&&(console.firebug||console.exception&&console.table)||navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31}function e(){var a=arguments,b=this.useColors;if(a[0]=(b?"%c":"")+this.namespace+(b?" %c":" ")+a[0]+(b?"%c ":" ")+"+"+c.humanize(this.diff),!b)return a;var d="color: "+this.color;a=[a[0],d,"color: inherit"].concat(Array.prototype.slice.call(a,1));var e=0,f=0;return a[0].replace(/%[a-z%]/g,function(a){"%%"!==a&&(e++,"%c"===a&&(f=e))}),a.splice(f,0,d),a}function f(){return"object"==typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)}function g(a){try{null==a?i.removeItem("debug"):i.debug=a}catch(b){}}function h(){var a;try{a=i.debug}catch(b){}return a}c=b.exports=a("./debug"),c.log=f,c.formatArgs=e,c.save=g,c.load=h,c.useColors=d;var i;i="undefined"!=typeof chrome&&"undefined"!=typeof chrome.storage?chrome.storage.local:window.localStorage,c.colors=["lightseagreen","forestgreen","goldenrod","dodgerblue","darkorchid","crimson"],c.formatters.j=function(a){return JSON.stringify(a)},c.enable(h())},{"./debug":36}],36:[function(a,b,c){function d(){return c.colors[k++%c.colors.length]}function e(a){function b(){}function e(){var a=e,b=+new Date,f=b-(j||b);a.diff=f,a.prev=j,a.curr=b,j=b,null==a.useColors&&(a.useColors=c.useColors()),null==a.color&&a.useColors&&(a.color=d());var g=Array.prototype.slice.call(arguments);g[0]=c.coerce(g[0]),"string"!=typeof g[0]&&(g=["%o"].concat(g));var h=0;g[0]=g[0].replace(/%([a-z%])/g,function(b,d){if("%%"===b)return b;h++;var e=c.formatters[d];if("function"==typeof e){var f=g[h];b=e.call(a,f),g.splice(h,1),h--}return b}),"function"==typeof c.formatArgs&&(g=c.formatArgs.apply(a,g));var i=e.log||c.log||console.log.bind(console);i.apply(a,g)}b.enabled=!1,e.enabled=!0;var f=c.enabled(a)?e:b;return f.namespace=a,f}function f(a){c.save(a);for(var b=(a||"").split(/[\s,]+/),d=b.length,e=0;d>e;e++)b[e]&&(a=b[e].replace(/\*/g,".*?"),"-"===a[0]?c.skips.push(new RegExp("^"+a.substr(1)+"$")):c.names.push(new RegExp("^"+a+"$")))}function g(){c.enable("")}function h(a){var b,d;for(b=0,d=c.skips.length;d>b;b++)if(c.skips[b].test(a))return!1;for(b=0,d=c.names.length;d>b;b++)if(c.names[b].test(a))return!0;return!1}function i(a){return a instanceof Error?a.stack||a.message:a}c=b.exports=e,c.coerce=i,c.disable=g,c.enable=f,c.enabled=h,c.humanize=a("ms"),c.names=[],c.skips=[],c.formatters={};var j,k=0},{ms:37}],37:[function(a,b){function c(a){var b=/^((?:\d+)?\.?\d+) *(ms|seconds?|s|minutes?|m|hours?|h|days?|d|years?|y)?$/i.exec(a);if(b){var c=parseFloat(b[1]),d=(b[2]||"ms").toLowerCase();switch(d){case"years":case"year":case"y":return c*k;case"days":case"day":case"d":return c*j;case"hours":case"hour":case"h":return c*i;case"minutes":case"minute":case"m":return c*h;case"seconds":case"second":case"s":return c*g;case"ms":return c}}}function d(a){return a>=j?Math.round(a/j)+"d":a>=i?Math.round(a/i)+"h":a>=h?Math.round(a/h)+"m":a>=g?Math.round(a/g)+"s":a+"ms"}function e(a){return f(a,j,"day")||f(a,i,"hour")||f(a,h,"minute")||f(a,g,"second")||a+" ms"}function f(a,b,c){return b>a?void 0:1.5*b>a?Math.floor(a/b)+" "+c:Math.ceil(a/b)+" "+c+"s"}var g=1e3,h=60*g,i=60*h,j=24*i,k=365.25*j;b.exports=function(a,b){return b=b||{},"string"==typeof a?c(a):b.long?e(a):d(a)}},{}],38:[function(a,b){function c(){}var d=b.exports={};d.nextTick=function(){var a="undefined"!=typeof window&&window.setImmediate,b="undefined"!=typeof window&&window.MutationObserver,c="undefined"!=typeof window&&window.postMessage&&window.addEventListener;if(a)return function(a){return window.setImmediate(a)};var d=[];if(b){var e=document.createElement("div"),f=new MutationObserver(function(){var a=d.slice();d.length=0,a.forEach(function(a){a()})});return f.observe(e,{attributes:!0}),function(a){d.length||e.setAttribute("yes","no"),d.push(a)}}return c?(window.addEventListener("message",function(a){var b=a.source;if((b===window||null===b)&&"process-tick"===a.data&&(a.stopPropagation(),d.length>0)){var c=d.shift();c()}},!0),function(a){d.push(a),window.postMessage("process-tick","*")}):function(a){setTimeout(a,0)}}(),d.title="browser",d.browser=!0,d.env={},d.argv=[],d.on=c,d.addListener=c,d.once=c,d.off=c,d.removeListener=c,d.removeAllListeners=c,d.emit=c,d.binding=function(){throw new Error("process.binding is not supported")},d.cwd=function(){return"/"},d.chdir=function(){throw new Error("process.chdir is not supported")}},{}],39:[function(a,b){var c=a("dragonjs"),d=c.Dimension,e=c.CollisionHandler;b.exports=e({name:"environ",gridSize:d(5,5)})},{dragonjs:12}],40:[function(a){var b=a("dragonjs"),c=b.Game,d=a("get-json");c.addScreens(a("./screens/main.js")),c.run({debug:!1}),d("http://time.jsontest.com",function(a,b){console.log(a?"Could not contact jsontest.com":JSON.stringify(b,null,3))})},{"./screens/main.js":41,dragonjs:12,"get-json":31}],41:[function(a,b){var c,d,e=a("dragonjs"),f=e.Screen,g=e.Game.canvas,h=a("../sprites/ground.js"),i=[];for(d=Math.ceil(g.width/81)+2,c=0;d>c;c+=1)i.push(h(81*c));b.exports=f({name:"main",collisionSets:a("../collisions/main.js"),spriteSet:[a("../sprites/sky.js"),a("../sprites/runner.js"),a("../sprites/hills-near.js"),a("../sprites/hills-far.js"),a("../sprites/sun.js")].concat(i),one:{ready:function(){this.start()}}}).extend({floorSet:i})},{"../collisions/main.js":39,"../sprites/ground.js":42,"../sprites/hills-far.js":43,"../sprites/hills-near.js":44,"../sprites/runner.js":45,"../sprites/sky.js":46,"../sprites/sun.js":47,dragonjs:12}],42:[function(a,b){function c(a){return j({name:"ground",collisionSets:[m,e.collisions],mask:i(g(),h(81,40)),strips:{ground:k({sheet:l({src:"ground.png"}),size:h(81,79)})},startingStrip:"ground",pos:g(a,f.height-79),depth:5}).extend({update:function(){var a;n.direction>0?(this.speed.x=-2,this.mask.right<0&&(a=e.screen("main").floorSet,this.pos.x=a[a.length-1].mask.right,a.push(a.shift()))):(this.speed.x=2,this.pos.x>f.width&&(a=e.screen("main").floorSet,this.pos.x=a[0].pos.x-this.size.width,a.unshift(a.pop()))),this.base.update()}})}var d=a("dragonjs"),e=d.Game,f=d.Game.canvas,g=d.Point,h=d.Dimension,i=d.Rectangle,j=d.Sprite,k=d.AnimationStrip,l=d.SpriteSheet,m=a("../collisions/main.js"),n=a("./runner.js");b.exports=c},{"../collisions/main.js":39,"./runner.js":45,dragonjs:12}],43:[function(a,b){var c=a("dragonjs"),d=c.Game.canvas,e=c.Point,f=c.Dimension,g=c.Sprite,h=c.AnimationStrip,i=c.SpriteSheet,j=a("./runner.js");b.exports=g({name:"hills-far",strips:{hills:h({sheet:i({src:"parallaxHill2.png"}),size:f(282,59)})},startingStrip:"hills",scale:5,pos:e(100,d.height-300),depth:9}).extend({update:function(){j.direction>0?(this.pos.x<-this.trueSize().width&&(this.pos.x=d.width),this.speed.x=-1):(this.pos.x>d.width&&(this.pos.x=-this.trueSize().width),this.speed.x=1),this.base.update()}})},{"./runner.js":45,dragonjs:12}],44:[function(a,b){var c=a("dragonjs"),d=c.Game.canvas,e=c.Point,f=c.Dimension,g=c.Sprite,h=c.AnimationStrip,i=c.SpriteSheet,j=a("./runner.js");b.exports=g({name:"hills-near",strips:{hills:h({sheet:i({src:"parallaxHill1.png"}),size:f(282,59)})},startingStrip:"hills",scale:1.6,pos:e(50,d.height-170),depth:8}).extend({update:function(){j.direction>0?(this.pos.x<-this.trueSize().width&&(this.pos.x=d.width),this.speed.x=-3):(this.pos.x>d.width&&(this.pos.x=-this.trueSize().width),this.speed.x=3),this.base.update()}})},{"./runner.js":45,dragonjs:12}],45:[function(a,b){var c=a("dragonjs"),d=c.Game,e=c.Mouse,f=(c.Keyboard,c.Point),g=c.Dimension,h=c.Rectangle,i=c.Sprite,j=c.AnimationStrip,k=c.SpriteSheet,l=(c.Polar,a("../collisions/main.js"));b.exports=i({name:"runner",collisionSets:[l,d.collisions],mask:h(f(),g(64,60)),strips:{"walk-right":j({sheet:k({src:"orc-walk.png"}),start:f(1,11),size:g(64,64),frames:8,speed:10}),"walk-left":j({sheet:k({src:"orc-walk.png"}),start:f(1,9),size:g(64,64),frames:8,speed:10}),jump:j({sheet:k({src:"orc-walk.png"}),start:f(3,2),size:g(64,64),frames:3,sinusoid:!0,speed:10})},startingStrip:"walk-right",pos:f(100,100),depth:2,on:{"colliding/ground":function(a){this.pos.y=a.pos.y-this.mask.height,this.speed.y=0,this.speed.x=.7*this.direction,this.base.update(),this.useStrip(this.direction>0?"walk-right":"walk-left")},"colliding/screendrag":function(){var a=e.offset.clone();a.x-=this.size.width/2,a.y-=this.size.height/2,this.move(a.x,a.y),this.speed.y=0,this.useStrip("jump"),this.strip.speed=20},"colliding/screentap":function(){this.speed.y=-30,this.useStrip("jump"),this.strip.speed=10},"collide/screenedge/left":function(){this.direction=1},"collide/screenedge/right":function(){this.direction=-1}}}).extend({update:function(){this.speed.y+=3,this.speed.x=0,this.base.update()},direction:1})},{"../collisions/main.js":39,dragonjs:12}],46:[function(a,b){{var c=a("dragonjs"),d=c.Game,e=(c.Point,c.Dimension),f=c.Sprite,g=c.AnimationStrip,h=c.SpriteSheet;a("../collisions/main.js")}b.exports=f({name:"sky",strips:{sky:g({sheet:h({src:"sky.png"}),size:e(5,400)})},startingStrip:"sky",size:d.canvas,depth:20})},{"../collisions/main.js":39,dragonjs:12}],47:[function(a,b){var c=a("dragonjs"),d=(c.Game.canvas,c.Point),e=c.Dimension,f=c.Sprite,g=c.AnimationStrip,h=c.SpriteSheet,i=a("./runner.js");b.exports=f({name:"sun",strips:{sun:g({sheet:h({src:"sun.png"}),size:e(248,248)})},startingStrip:"sun",scale:.5,pos:d(170,50),depth:10}).extend({update:function(){this.speed.x=i.direction>0?-.2:.2,this.base.update()}})},{"./runner.js":45,dragonjs:12}]},{},[40]);