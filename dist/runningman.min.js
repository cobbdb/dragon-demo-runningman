!function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);var j=new Error("Cannot find module '"+g+"'");throw j.code="MODULE_NOT_FOUND",j}var k=c[g]={exports:{}};b[g][0].call(k.exports,function(a){var c=b[g][1][a];return e(c?c:a)},k,k.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b){b.exports=function(){throw Error("[BaseClass] Abstract method was called without definition.")}},{}],2:[function(a,b){function c(a){return a.leaf=a,a.extend=function(a){var b,c={};a=a||{};for(b in this)c[b]="function"==typeof this[b]?this[b].bind(c):this[b];for(b in a)this[b]=a[b],"function"!=typeof a[b]&&(c[b]=a[b]);return this.base=c,this},a.implement=function(){var b,c=arguments.length;for(b=0;c>b;b+=1)arguments[b](a);return a},a}c.Abstract=a("./abstract.js"),c.Stub=a("./stub.js"),c.Interface=a("./interface.js"),b.exports=c},{"./abstract.js":1,"./interface.js":3,"./stub.js":4}],3:[function(a,b){b.exports=function(a){return function(b){var c;for(c in a)b[c]=a[c];return b}}},{}],4:[function(a,b){b.exports=function(){}},{}],5:[function(a,b){var c=a("./dimension.js"),d=a("./point.js");b.exports=function(a){var b,e,f=0,g=!1,h=a.frames||1,i=a.size||c(),j=a.start||d();return b=a.speed>0?1/a.speed*1e3:0,{ready:function(){return a.sheet.ready},size:i,frame:0,start:function(){e=(new Date).getTime(),g=!0},pause:function(){g=!1},stop:function(){g=!1,f=0,this.frame=0},update:function(){var a,c;g&&(a=(new Date).getTime(),c=a-e,e=a,f+=c,f>=b&&(f-=b,this.nextFrame()))},nextFrame:function(){return this.frame+=1,this.frame%=h,this.frame},draw:function(b,d,e,f){var g,h=this.frame*i.width;e=e||c(1,1),f=f||0,g=c(i.width*e.width,i.height*e.height),b.save(),b.translate(d.x+g.width/2,d.y+g.height/2),b.rotate(f),b.drawImage(a.sheet,j.x+h,j.y,i.width,i.height,-g.width/2,-g.height/2,g.width,g.height),b.restore()}}}},{"./dimension.js":10,"./point.js":17}],6:[function(a,b){{var c=a("./shape.js"),d=a("./vector.js"),e=a("./point.js");a("./dimension.js")}b.exports=function(a,b){a=a||e(),b=b||0;var f=c(a.x,a.y).extend({radius:b,intersects:function(a){return a.intersects.circle(this)},draw:function(a){a.beginPath(),a.lineWidth=1,a.strokeStyle="rgba(250, 50, 50, 0.5)",a.arc(this.x,this.y,this.radius,0,2*Math.PI),a.stroke()}});return f.intersects.circle=function(a){var b=d({start:this,end:a});return b.size<this.radius+a.radius},f.intersects.rect=function(a){var b,c=e(this.x,this.y);return this.x>a.right?c.x=a.right:this.x<a.x&&(c.x=a.x),this.y>a.bottom?c.y=a.bottom:this.y<a.y&&(c.y=a.y),b=d.length(c.x,c.y,this.x,this.y),b<circle.radius},f}},{"./dimension.js":10,"./point.js":17,"./shape.js":21,"./vector.js":24}],7:[function(a,b){var c=a("./id-counter.js"),d=a("./event-handler.js"),e=a("baseclassjs"),f=a("./rectangle.js");b.exports=function(a){var b=c.nextId,g={},h=[];return a.collisionSets&&(h=h.concat(a.collisionSets)),e({id:function(){return b},name:function(){return a.name},mask:a.mask||f(),move:function(a,b){this.mask.move(a,b)},intersects:function(a){return this.mask.intersects(a)},update:function(){var a=this.leaf;h.forEach(function(b){b.update(a)})},addCollision:function(a){a!==b&&(g[a]=!0)},removeCollision:function(a){g[a]=!1},isCollidingWith:function(a){return g[a]||!1}}).implement(d({events:a.on,singles:a.one}))}},{"./event-handler.js":11,"./id-counter.js":14,"./rectangle.js":19,baseclassjs:2}],8:[function(a,b){var c=a("./rectangle.js"),d=a("./point.js"),e=a("./dimension.js");b.exports=function(a){var b,f,g,h=[],i=[],j=a.gridSize||e(1,1);for(b=0;b<j.width;b+=1)for(f=0;f<j.height;f+=1)h.push(c(d(b/j.width*a.canvasSize.width,f/j.height*a.canvasSize.height),e(a.canvasSize.width/j.width,a.canvasSize.height/j.height)));for(g=h.length,b=0;g>b;b+=1)i.push([]);return{name:a.name,draw:function(a){h.forEach(function(b){b.draw(a)}),i.forEach(function(b){b.forEach(function(b){b.mask.draw(a)})})},clearCollisions:function(){var a,b=i.length;for(a=0;b>a;a+=1)i[a]=[]},update:function(a){var b,c=i.length;for(b=0;c>b;b+=1)a.intersects(h[b])&&i[b].push(a)},handleCollisions:function(){var a,b,c=i.length;for(a=0;c>a;a+=1)b=i[a],b.forEach(function(a){b.forEach(function(b){var c=a.intersects(b.mask),d=a.isCollidingWith(b.id);c?(d||(a.trigger("collide/"+b.name,b),a.addCollision(b.id)),a.trigger("colliding/"+b.name,b)):(d&&(a.trigger("separate/"+b.name,b),a.removeCollision(b.id)),a.trigger("miss/"+b.name,b))})}),i[a]=[]}}}},{"./dimension.js":10,"./point.js":17,"./rectangle.js":19}],9:[function(a,b){b.exports={Shape:a("./shape.js"),Circle:a("./circle.js"),Rectangle:a("./rectangle.js"),Dimension:a("./dimension.js"),Point:a("./point.js"),Vector:a("./vector.js"),Polar:a("./polar.js"),FrameCounter:a("./frame-counter.js"),IdCounter:a("./id-counter.js"),Mouse:a("./mouse.js"),Keyboard:a("./keyboard.js"),EventHandler:a("./event-handler.js"),SpriteSheet:a("./spritesheet.js"),AnimationStrip:a("./animation-strip.js"),CollisionHandler:a("./collision-handler.js"),Game:a("./game.js"),Screen:a("./screen.js"),Collidable:a("./collidable.js"),Sprite:a("./sprite.js")}},{"./animation-strip.js":5,"./circle.js":6,"./collidable.js":7,"./collision-handler.js":8,"./dimension.js":10,"./event-handler.js":11,"./frame-counter.js":12,"./game.js":13,"./id-counter.js":14,"./keyboard.js":15,"./mouse.js":16,"./point.js":17,"./polar.js":18,"./rectangle.js":19,"./screen.js":20,"./shape.js":21,"./sprite.js":22,"./spritesheet.js":23,"./vector.js":24}],10:[function(a,b){b.exports=function(a,b){return{width:a||0,height:b||0}}},{}],11:[function(a,b){var c=a("baseclassjs");b.exports=function(a){var b,d={},e={};a=a||{};for(b in a.events)d[b]=d[b]||[],d[b].push(a.events[b]);for(b in a.singles)e[b]=e[b]||[],e[b].push(a.singles[b]);return c.Interface({on:function(a,b){d[a]=d[a]||[],d[a].push(b)},one:function(a,b){e[a]=e[a]||[],e[a].push(b)},off:function(a){d[a]=[],e[a]=[]},trigger:function(a,b){d[a]&&d[a].forEach(function(a){a(b)}),e[a]&&(e[a].forEach(function(a){a(b)}),e[a]=[])}})}},{baseclassjs:2}],12:[function(a,b){var c=frameCountThisSecond=frameRate=0,d=(new Date).getTime();b.exports={countFrame:function(){var a=(new Date).getTime(),b=a-d;frameCountThisSecond+=1,d=a,c+=b,c>=1e3&&(c-=1e3,frameRate=frameCountThisSecond,frameCountThisSecond=0)},get frameRate(){return frameRate},draw:function(a){a.font="30px Verdana",a.fillStyle="rgba(250, 50, 50, 0.5)",a.fillText(frameRate,20,50)}}},{}],13:[function(a,b){var c,d,e,f,g=a("./collision-handler.js"),h=a("./point.js"),i=a("./dimension.js"),j=a("./circle.js"),k=a("./collidable.js"),l=a("./frame-counter.js"),m=!1,n=!1,o=50,p=document.createElement("canvas"),q=[],r={},s=[],t=!1;window.innerWidth>=500?(p.width=320,p.height=480,p.style.border="1px solid #000",c="mousedown",d="mouseup"):(p.width=window.innerWidth,p.height=window.innerHeight,c="touchstart",d="touchend"),f=g({name:"screentap",gridSize:i(4,4),canvasSize:p}),e=p.getContext("2d"),document.addEventListener(c,function(a){f.update(k({name:"screentap",mask:j(h(a.offsetX,a.offsetY),12)}))}),document.body.appendChild(p),b.exports={canvas:p,ctx:e,pressEventName:function(){return{start:c,end:d}},screenTap:f,screen:function(a){return r[a]},addScreens:function(a){a.onload||function(){};s=s.concat(a.set)},removeScreen:function(a){a.removed=!0,t=!0},run:function(a){var b,c=this;a=a||{},b=a.speed||o,m=a.debug,m&&(window.Dragon=this),n||(q.forEach(function(a){a.start()}),n=window.setInterval(function(){m&&console.log("beat"),c.update(),c.draw(),l.countFrame()},b))},kill:function(){window.clearInterval(n),n=!1,q.forEach(function(a){a.stop()})},update:function(){f.handleCollisions(),q.forEach(function(a){a.update()}),s.length&&(s.forEach(function(a){q.push(a),a.name()&&(r[a.name()]=a),a.trigger("ready")}),q.sort(function(a,b){return b.depth-a.depth}),s=[]),t&&(q=q.filter(function(a){return!a.removed}),t=!1)},draw:function(){q.forEach(function(a){a.draw(e,m)}),m&&(f.draw(e),l.draw(e))}}},{"./circle.js":6,"./collidable.js":7,"./collision-handler.js":8,"./dimension.js":10,"./frame-counter.js":12,"./point.js":17}],14:[function(a,b){var c=0;b.exports={get lastId(){return c},get nextId(){return c+=1}}},{}],15:[function(a,b){function c(a){return a.charCode||a.keyCode||a.which}var d={alt:!1,ctrl:!1,shift:!1},e={};document.onkeydown=function(a){var b=c(a),f=String.fromCharCode(b);e[b]=!0,d[f]=!0,d.alt=a.altKey,d.ctrl=a.ctrlKey,d.shift=a.shiftKey},document.onkeyup=function(a){var b=c(a),f=String.fromCharCode(b);e[b]=!1,d[f]=!1,d.alt=a.altKey,d.ctrl=a.ctrlKey,d.shift=a.shiftKey},b.exports={get alt(){return d.alt},get ctrl(){return d.ctrl},get shift(){return d.shift},name:function(a){return d[a]||!1},code:function(a){return e[a]||!1}}},{}],16:[function(a,b){var c=a("./game.js"),d=!1;document.addEventListener(c.pressEventName.start,function(){d=!0}),document.addEventListener(c.pressEventName.end,function(){d=!1}),b.exports={get isDown(){return d}}},{"./game.js":13}],17:[function(a,b){b.exports=function(a,b){return{x:a||0,y:b||0}}},{}],18:[function(a,b){var c=a("./vector.js"),d=a("baseclassjs");b.exports=function(a,b){return d({theta:a||0,magnitude:b||0,invert:function(){return this.magnitude*=-1,this.theta+=Math.PI,this},toVector:function(){return c(b*Math.cos(a),b*Math.sin(a))}})}},{"./vector.js":24,baseclassjs:2}],19:[function(a,b){var c=a("./shape.js"),d=a("./point.js"),e=a("./dimension.js"),f=a("./vector.js");b.exports=function(a,b){a=a||d(),b=b||e();var g=c(a.x,a.y).extend({width:b.width||0,height:b.height||0,right:a.x+b.width||0,bottom:a.y+b.height||0,move:function(a,b){this.base.move(a,b),this.right=a+this.width,this.bottom=b+this.height},intersects:function(a){return a.intersects.rect(this)},draw:function(a){a.beginPath(),a.lineWidth=1,a.strokeStyle="rgba(250, 50, 50, 0.5)",a.rect(this.x,this.y,this.width,this.height),a.stroke()}});return g.intersects.rect=function(a){return this.x<a.right&&this.right>a.x&&this.y<a.bottom&&this.bottom>a.y},g.intersects.circle=function(a){var b,c=d(a.x,a.y);return a.x>this.right?c.x=this.right:a.x<this.x&&(c.x=this.x),a.y>this.bottom?c.y=this.bottom:a.y<this.y&&(c.y=this.y),b=f({start:c,end:a}),b.size<a.radius},g}},{"./dimension.js":10,"./point.js":17,"./shape.js":21,"./vector.js":24}],20:[function(a,b){var c=a("baseclassjs"),d=a("./event-handler.js");b.exports=function(a){var b=[],e={},f=[],g=!1,h={},i=!1,j=!1;return a.spriteSet=[].concat(a.spriteSet),a.collisionSets=[].concat(a.collisionSets),a.spriteSet.forEach(function(a){f.push(a),a.name&&(e[a.name]=a)}),a.collisionSets.forEach(function(a){h[a.name]=a}),c({name:function(){return a.name},start:function(){b.forEach(function(a){a.strip.start()}),i=!0,j=!0},pause:function(){b.forEach(function(a){a.strip.pause()}),i=!1,j=!0},stop:function(){b.forEach(function(a){a.strip.stop()}),i=!1,j=!1},depth:a.depth||0,collisions:function(){return h},addCollisionSet:function(a){h[a.name]=a},sprite:function(a){return e[a]},addSprites:function(a){a.onload||function(){};f=f.concat(a.set)},removeSprite:function(a){a.removed=!0,g=!0},update:function(){var a,c=!1,d=[];if(i){b.forEach(function(a){i&&!a.removed&&a.update()});for(a in h)h[a].handleCollisions()}f.length&&(f.forEach(function(a){a.ready()?(b.push(a),a.name&&(e[a.name]=a),c=!0):d.push(a)}),c&&b.sort(function(a,b){return b.depth-a.depth}),f=d),g&&(b=b.filter(function(a){return!a.removed}),g=!1)},draw:function(a,c){var d;if(j&&(b.forEach(function(b){b.draw(a)}),c))for(d in h)h[d].draw(a)}}).implement(d({events:a.on,singles:a.one}))}},{"./event-handler.js":11,baseclassjs:2}],21:[function(a,b){var c=a("baseclassjs");b.exports=function(a,b){return c({x:a||0,y:b||0,move:function(a,b){this.x=a,this.y=b},intersects:c.Stub,draw:c.Stub})}},{baseclassjs:2}],22:[function(a,b){var c=a("./collidable.js"),d=a("./point.js"),e=a("./dimension.js");b.exports=function(a){var b=a.size||a.strip.size,f=a.strip.size;return c(a).extend({ready:function(){return a.strip.ready()},strip:a.strip,pos:a.pos||d(),scale:a.scale||1,size:b,rotation:a.rotation||0,depth:a.depth||0,speed:a.speed||d(),update:function(){this.shift(),this.base.update(),a.strip.update()},draw:function(b){a.strip.draw(b,this.pos,e(this.scale*this.size.width/f.width,this.scale*this.size.height/f.height),this.rotation)},move:function(a,b){this.pos.x=a,this.pos.y=b,this.base.move(a,b)},shift:function(a,b){this.pos.x+=a||this.speed.x,this.pos.y+=b||this.speed.y,this.base.move(this.pos.x,this.pos.y)}})}},{"./collidable.js":7,"./dimension.js":10,"./point.js":17}],23:[function(a,b){var c={};b.exports=function(a){var b,d=a.onload||function(){};return a.src in c?(b=c[a.src],d(b),b):(b=new Image,b.ready=!1,c[a.src]=b,b.onload=function(){b.ready=!0,d(b)},b.src="assets/img/"+a.src,b)}},{}],24:[function(a,b){{var c=a("./point.js");a("./dimension.js")}b.exports=function(a){var b=a.start||c(),d=a.end||c(b.x+a.size.width,b.y+a.size.height);return{start:b,end:d,get size(){var a=d.x-b.x,c=d.y-b.y;return Math.sqrt(a*a+c*c)}}}},{"./dimension.js":10,"./point.js":17}],25:[function(a,b){var c=a("dragonjs"),d=c.Dimension,e=c.CollisionHandler,f=c.Game;b.exports=e({name:"environ",gridSize:d(5,5),canvasSize:f.canvas})},{dragonjs:9}],26:[function(a){var b=a("dragonjs"),c=b.Game,d=a("./screens/main.js");c.addScreens({set:d,onload:function(){c.run({debug:!0})}}),c.run({debug:!0})},{"./screens/main.js":27,dragonjs:9}],27:[function(a,b){var c=a("dragonjs"),d=c.Game,e=c.Screen,f=a("../sprites/sky.js"),g=a("../sprites/runner.js"),h=a("../sprites/ground.js"),i=a("../collisions/main.js");b.exports=e({name:"main",collisionSets:i,spriteSet:[f,g,h],on:{ready:function(){d.screen("main").start()}}})},{"../collisions/main.js":25,"../sprites/ground.js":28,"../sprites/runner.js":29,"../sprites/sky.js":30,dragonjs:9}],28:[function(a,b){var c=a("dragonjs"),d=c.Game.canvas,e=c.Point,f=c.Dimension,g=c.Rectangle,h=c.Sprite,i=c.AnimationStrip,j=c.SpriteSheet,k=a("../collisions/main.js");b.exports=h({name:"ground",collisionSets:k,mask:g(e(0,d.height-79),f(d.width,79)),strip:i({sheet:j({src:"ground.png"}),size:f(81,79)}),pos:e(0,d.height-79)})},{"../collisions/main.js":25,dragonjs:9}],29:[function(a,b){var c=a("dragonjs"),d=c.Game,e=c.Keyboard,f=c.Point,g=c.Dimension,h=c.Rectangle,i=c.Sprite,j=c.AnimationStrip,k=c.SpriteSheet,l=a("../collisions/main.js");b.exports=i({name:"runner",collisionSets:[l,d.screenTap],mask:h(f(100,100),g(66,115)),strip:j({sheet:k({src:"runningGrant.png"}),start:f(),size:g(165,288),frames:12,speed:5}),pos:f(100,100),size:g(66,115),rotation:.4,on:{"collide/ground":function(){console.log("Runner: Colliding with ground!")},"collide/screentap":function(){console.log("Runner: Clicked!")}}}).extend({update:function(){e.name(" ")&&(this.rotation+=.3,this.rotation%=2*Math.PI),this.speed.x=e.code(37)?-10:e.code(39)?10:0,this.speed.y=e.code(38)?-10:e.code(40)?10:0,this.base.update()}})},{"../collisions/main.js":25,dragonjs:9}],30:[function(a,b){var c=a("dragonjs"),d=c.Game,e=c.Point,f=c.Dimension,g=c.Sprite,h=c.AnimationStrip,i=c.SpriteSheet;b.exports=g({name:"sky",strip:h({sheet:i({src:"sky.png"}),start:e(),size:f(5,400),frames:1}),size:d.canvas})},{dragonjs:9}]},{},[26]);